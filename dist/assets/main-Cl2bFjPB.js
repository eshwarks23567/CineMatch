import{j as e,m as v,A as Me,u as jt,a as Nt}from"./motion-vendor-BmPAhqrV.js";import{a as wt,r as a,b as bt,R as Le}from"./react-vendor-BStAX1aO.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();var Ge={},Ze=wt;Ge.createRoot=Ze.createRoot,Ge.hydrateRoot=Ze.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oe(){return Oe=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},Oe.apply(this,arguments)}var Re;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Re||(Re={}));const et="popstate";function Ct(t){t===void 0&&(t={});function n(l,i){let{pathname:u,search:h,hash:p}=l.location;return Ke("",{pathname:u,search:h,hash:p},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(l,i){return typeof i=="string"?i:Ue(i)}return Rt(n,r,null,t)}function he(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function St(){return Math.random().toString(36).substr(2,8)}function tt(t,n){return{usr:t.state,key:t.key,idx:n}}function Ke(t,n,r,l){return r===void 0&&(r=null),Oe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?We(n):n,{state:r,key:n&&n.key||l||St()})}function Ue(t){let{pathname:n="/",search:r="",hash:l=""}=t;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function We(t){let n={};if(t){let r=t.indexOf("#");r>=0&&(n.hash=t.substr(r),t=t.substr(0,r));let l=t.indexOf("?");l>=0&&(n.search=t.substr(l),t=t.substr(0,l)),t&&(n.pathname=t)}return n}function Rt(t,n,r,l){l===void 0&&(l={});let{window:i=document.defaultView,v5Compat:u=!1}=l,h=i.history,p=Re.Pop,f=null,d=m();d==null&&(d=0,h.replaceState(Oe({},h.state,{idx:d}),""));function m(){return(h.state||{idx:null}).idx}function x(){p=Re.Pop;let E=m(),k=E==null?null:E-d;d=E,f&&f({action:p,location:w.location,delta:k})}function P(E,k){p=Re.Push;let A=Ke(w.location,E,k);d=m()+1;let z=tt(A,d),M=w.createHref(A);try{h.pushState(z,"",M)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(M)}u&&f&&f({action:p,location:w.location,delta:1})}function S(E,k){p=Re.Replace;let A=Ke(w.location,E,k);d=m();let z=tt(A,d),M=w.createHref(A);h.replaceState(z,"",M),u&&f&&f({action:p,location:w.location,delta:0})}function R(E){let k=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof E=="string"?E:Ue(E);return A=A.replace(/ $/,"%20"),he(k,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,k)}let w={get action(){return p},get location(){return t(i,h)},listen(E){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(et,x),f=E,()=>{i.removeEventListener(et,x),f=null}},createHref(E){return n(i,E)},createURL:R,encodeLocation(E){let k=R(E);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:P,replace:S,go(E){return h.go(E)}};return w}var nt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nt||(nt={}));function ct(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,l=t.charAt(r);return l&&l!=="/"?null:t.slice(r)||"/"}function Tt(t,n){n===void 0&&(n="/");let{pathname:r,search:l="",hash:i=""}=typeof t=="string"?We(t):t;return{pathname:r?r.startsWith("/")?r:Et(r,n):n,search:kt(l),hash:At(i)}}function Et(t,n){let r=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Je(t,n,r,l){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pt(t){return t.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function dt(t,n){let r=Pt(t);return n?r.map((l,i)=>i===r.length-1?l.pathname:l.pathnameBase):r.map(l=>l.pathnameBase)}function ut(t,n,r,l){l===void 0&&(l=!1);let i;typeof t=="string"?i=We(t):(i=Oe({},t),he(!i.pathname||!i.pathname.includes("?"),Je("?","pathname","search",i)),he(!i.pathname||!i.pathname.includes("#"),Je("#","pathname","hash",i)),he(!i.search||!i.search.includes("#"),Je("#","search","hash",i)));let u=t===""||i.pathname==="",h=u?"/":i.pathname,p;if(h==null)p=r;else{let x=n.length-1;if(!l&&h.startsWith("..")){let P=h.split("/");for(;P[0]==="..";)P.shift(),x-=1;i.pathname=P.join("/")}p=x>=0?n[x]:"/"}let f=Tt(i,p),d=h&&h!=="/"&&h.endsWith("/"),m=(u||h===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(d||m)&&(f.pathname+="/"),f}const ht=t=>t.join("/").replace(/\/\/+/g,"/"),kt=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,At=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,mt=["post","put","patch","delete"];new Set(mt);const _t=["get",...mt];new Set(_t);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function He(){return He=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},He.apply(this,arguments)}const pt=a.createContext(null),_e=a.createContext(null),Qe=a.createContext(null),Ie=a.createContext({outlet:null,matches:[],isDataRoute:!1});function $t(t,n){let{relative:r}=n===void 0?{}:n;Ye()||he(!1);let{basename:l,navigator:i}=a.useContext(_e),{hash:u,pathname:h,search:p}=yt(t,{relative:r}),f=h;return l!=="/"&&(f=h==="/"?l:ht([l,h])),i.createHref({pathname:f,search:p,hash:u})}function Ye(){return a.useContext(Qe)!=null}function $e(){return Ye()||he(!1),a.useContext(Qe).location}function ft(t){a.useContext(_e).static||a.useLayoutEffect(t)}function Fe(){let{isDataRoute:t}=a.useContext(Ie);return t?zt():Mt()}function Mt(){Ye()||he(!1);let t=a.useContext(pt),{basename:n,future:r,navigator:l}=a.useContext(_e),{matches:i}=a.useContext(Ie),{pathname:u}=$e(),h=JSON.stringify(dt(i,r.v7_relativeSplatPath)),p=a.useRef(!1);return ft(()=>{p.current=!0}),a.useCallback(function(d,m){if(m===void 0&&(m={}),!p.current)return;if(typeof d=="number"){l.go(d);return}let x=ut(d,JSON.parse(h),u,m.relative==="path");t==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:ht([n,x.pathname])),(m.replace?l.replace:l.push)(x,m.state,m)},[n,l,h,u,t])}function Lt(){let{matches:t}=a.useContext(Ie),n=t[t.length-1];return n?n.params:{}}function yt(t,n){let{relative:r}=n===void 0?{}:n,{future:l}=a.useContext(_e),{matches:i}=a.useContext(Ie),{pathname:u}=$e(),h=JSON.stringify(dt(i,l.v7_relativeSplatPath));return a.useMemo(()=>ut(t,JSON.parse(h),u,r==="path"),[t,h,u,r])}var gt=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gt||{}),vt=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vt||{});function Ot(t){let n=a.useContext(pt);return n||he(!1),n}function It(t){let n=a.useContext(Ie);return n||he(!1),n}function Ft(t){let n=It(),r=n.matches[n.matches.length-1];return r.route.id||he(!1),r.route.id}function zt(){let{router:t}=Ot(gt.UseNavigateStable),n=Ft(vt.UseNavigateStable),r=a.useRef(!1);return ft(()=>{r.current=!0}),a.useCallback(function(i,u){u===void 0&&(u={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,He({fromRouteId:n},u)))},[t,n])}function Dt(t,n){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Bt(t){let{basename:n="/",children:r=null,location:l,navigationType:i=Re.Pop,navigator:u,static:h=!1,future:p}=t;Ye()&&he(!1);let f=n.replace(/^\/*/,"/"),d=a.useMemo(()=>({basename:f,navigator:u,static:h,future:He({v7_relativeSplatPath:!1},p)}),[f,p,u,h]);typeof l=="string"&&(l=We(l));let{pathname:m="/",search:x="",hash:P="",state:S=null,key:R="default"}=l,w=a.useMemo(()=>{let E=ct(m,f);return E==null?null:{location:{pathname:E,search:x,hash:P,state:S,key:R},navigationType:i}},[f,m,x,P,S,R,i]);return w==null?null:a.createElement(_e.Provider,{value:d},a.createElement(Qe.Provider,{children:r,value:w}))}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},qe.apply(this,arguments)}function Ut(t,n){if(t==null)return{};var r={},l=Object.keys(t),i,u;for(u=0;u<l.length;u++)i=l[u],!(n.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Ht(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Wt(t,n){return t.button===0&&(!n||n==="_self")&&!Ht(t)}const Yt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xt="6";try{window.__reactRouterVersion=Xt}catch{}const Jt="startTransition",st=bt[Jt];function Gt(t){let{basename:n,children:r,future:l,window:i}=t,u=a.useRef();u.current==null&&(u.current=Ct({window:i,v5Compat:!0}));let h=u.current,[p,f]=a.useState({action:h.action,location:h.location}),{v7_startTransition:d}=l||{},m=a.useCallback(x=>{d&&st?st(()=>f(x)):f(x)},[f,d]);return a.useLayoutEffect(()=>h.listen(m),[h,m]),a.useEffect(()=>Dt(l),[l]),a.createElement(Bt,{basename:n,children:r,location:p.location,navigationType:p.action,navigator:h,future:l})}const Kt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vt=a.forwardRef(function(n,r){let{onClick:l,relative:i,reloadDocument:u,replace:h,state:p,target:f,to:d,preventScrollReset:m,viewTransition:x}=n,P=Ut(n,Yt),{basename:S}=a.useContext(_e),R,w=!1;if(typeof d=="string"&&qt.test(d)&&(R=d,Kt))try{let z=new URL(window.location.href),M=d.startsWith("//")?new URL(z.protocol+d):new URL(d),b=ct(M.pathname,S);M.origin===z.origin&&b!=null?d=b+M.search+M.hash:w=!0}catch{}let E=$t(d,{relative:i}),k=Qt(d,{replace:h,state:p,target:f,preventScrollReset:m,relative:i,viewTransition:x});function A(z){l&&l(z),z.defaultPrevented||k(z)}return a.createElement("a",qe({},P,{href:R||E,onClick:w||u?l:A,ref:r,target:f}))});var at;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(at||(at={}));var rt;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rt||(rt={}));function Qt(t,n){let{target:r,replace:l,state:i,preventScrollReset:u,relative:h,viewTransition:p}=n===void 0?{}:n,f=Fe(),d=$e(),m=yt(t,{relative:h});return a.useCallback(x=>{if(Wt(x,r)){x.preventDefault();let P=l!==void 0?l:Ue(d)===Ue(m);f(t,{replace:P,state:i,preventScrollReset:u,relative:h,viewTransition:p})}},[d,f,m,l,i,r,t,u,h,p])}function Zt(){var ge;const{id:t}=Lt(),n=Fe(),r=$e(),[l,i]=a.useState(!0),[u,h]=a.useState(null),[p,f]=a.useState(null),[d,m]=a.useState(!1),[x,P]=a.useState(null),[S,R]=a.useState([]),[w,E]=a.useState(null),[k,A]=a.useState(!1),[z,M]=a.useState(null),[b,T]=a.useState([]);a.useRef(null);const D=(c,N)=>{const _=(N||"").trim();T([]),M(null),E({role:c,name:_})};a.useEffect(()=>{let c=!1;const N=t??(typeof window<"u"?window.location.pathname.split("/").filter(Boolean).pop():void 0),_=N&&N!=="undefined"&&N!=="null"?N:void 0,g=r&&r.state?r.state.title:void 0;if(i(!0),h(null),!_&&!g)return c||(h("Invalid or missing movie id"),i(!1)),()=>{c=!0};const $=_?`/movie_details?movie_id=${encodeURIComponent(_)}`:`/movie_details?title=${encodeURIComponent(g)}`;return fetch($).then(Y=>{if(!Y.ok)throw new Error(`HTTP ${Y.status}`);return Y.json()}).then(Y=>{if(!c){if(Y.error){h(Y.error),i(!1);return}f(Y),i(!1)}}).catch(Y=>{c||(h(Y.message||"Failed to load movie"),i(!1))}),()=>{c=!0}},[t,(ge=r==null?void 0:r.state)==null?void 0:ge.title,r==null?void 0:r.pathname]),a.useEffect(()=>{if(!p||!p.title)return;let c=!1;m(!0),P(null);const N=p.title.split(/[:\-â€“â€”]/)[0].trim();return fetch("/recommend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:N,include_franchise:!0})}).then(_=>_.ok?_.json():_.json().then(g=>{throw new Error(g.error||`HTTP ${_.status}`)})).then(_=>{if(!c){const g=Array.isArray(_.recommendations)?_.recommendations:[];R(g.filter($=>$&&String($.movie_id)!==String(p.movie_id))),m(!1)}}).catch(_=>{c||(P(_.message||"Failed to load recommendations"),m(!1))}),()=>{c=!0}},[p==null?void 0:p.title]),a.useEffect(()=>{if(!w)return;let c=!1;return A(!0),M(null),T([]),fetch("/get_movies_by_person",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:w.role,name:w.name})}).then(N=>N.ok?N.json():N.json().then(_=>{throw new Error(_.error||`HTTP ${N.status}`)})).then(N=>{if(!c){const _=Array.isArray(N.movies)?N.movies:[];T(_),A(!1)}}).catch(N=>{c||(M(N.message||"Failed to load"),A(!1))}),()=>{c=!0}},[w]);const Z="https://placehold.co/150x225/333/999?text=No+Photo";if(l)return e.jsx("div",{className:"container",children:e.jsx("h2",{className:"section-title",children:"Loading..."})});if(u||!p)return e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"section-title",children:"Movie Details"}),e.jsx("div",{className:"error",children:u||"Movie not found"}),e.jsx("div",{style:{textAlign:"center",marginTop:20},children:e.jsx(Vt,{to:"/",style:{color:"#00A8E1"},children:"Back to Home"})})]});const{title:O,poster_url:F,backdrop_url:ee,year:ce,genres:G=[],runtime:re,vote_average:ae,vote_count:ne,language:fe,homepage:me,overview:ye,cast:xe=[],directors:we=[],reviews:pe=[]}=p;return e.jsxs(v.div,{className:"movie-detail-page",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs(v.div,{className:"movie-detail-hero",style:{backgroundImage:ee?`url(${ee})`:"none"},initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},transition:{duration:.7},children:[e.jsx("div",{className:"default-ltr-cache-1abfllx"}),e.jsx(v.div,{className:"container",style:{position:"relative",zIndex:3,paddingTop:40,paddingBottom:22},initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},children:e.jsxs("div",{style:{display:"flex",gap:24,alignItems:"flex-end"},children:[e.jsx(v.img,{className:"movie-detail-poster",src:F,alt:`${O} poster`,onError:c=>{c.currentTarget.src="https://placehold.co/220x330/333/999?text=No+Poster"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.4,duration:.5},whileHover:{scale:1.05,transition:{duration:.3}}}),e.jsxs(v.div,{style:{paddingBottom:12},initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5,duration:.5},children:[e.jsx("h1",{className:"movie-detail-title",children:O}),e.jsxs("div",{className:"movie-meta-info",children:[ce&&e.jsx("span",{children:ce}),re?e.jsxs("span",{children:[re," min"]}):null,fe&&e.jsx("span",{children:fe}),ae?e.jsxs("span",{className:"rating",children:[e.jsx("span",{className:"star",children:"â˜…"}),Number(ae).toFixed(1),e.jsxs("span",{className:"vote-count",children:["(",ne||0,")"]})]}):null]}),G.length>0&&e.jsx(v.div,{className:"genre-tags two-row-grid",style:{marginTop:10},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.4},children:G.slice(0,4).map((c,N)=>e.jsx(v.span,{className:"genre-tag",onClick:_=>{_.stopPropagation(),n(`/recommendations?genre=${encodeURIComponent(c)}`,{state:{genre:c}})},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.65+N*.05,duration:.3},whileHover:{scale:1.1,transition:{duration:.2}},whileTap:{scale:.95},children:c},c))}),we.length>0&&e.jsxs("div",{style:{marginTop:8,color:"#cfd3d7"},children:["Directed by ",we.map((c,N)=>e.jsx("span",{className:"genre-tag name-tag",style:{marginLeft:N===0?6:8},onClick:()=>D("director",c),children:c},`dir-${c}`))]}),e.jsxs("div",{style:{marginTop:14,display:"flex",gap:14,alignItems:"center"},children:[e.jsxs("button",{className:"nav-button back-button",onClick:()=>n(-1),children:[e.jsx("svg",{className:"icon",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),"Back"]}),me&&e.jsx("a",{href:me,target:"_blank",rel:"noopener noreferrer",className:"mood-input-go",style:{textAlign:"center"},children:"Official Site â†—"})]})]})]})})]}),e.jsx(v.div,{className:"container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:e.jsxs("div",{className:"movie-grid-sidebar",children:[e.jsxs("div",{children:[e.jsxs(v.section,{className:"panel-section",style:{marginBottom:28},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",style:{marginTop:0},initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:.7,duration:.5,ease:[.34,1.56,.64,1]},children:"Overview"}),e.jsx(v.p,{style:{color:"#cfd3d7",fontSize:"1.05em"},initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:ye||"No overview available."})]}),e.jsxs(v.section,{className:"panel-section",style:{marginBottom:28},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",style:{marginTop:0},initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:1,duration:.5,ease:[.34,1.56,.64,1]},children:"Top Cast"}),xe.length===0?e.jsx("div",{className:"no-results",children:"No cast data available."}):e.jsx("div",{className:"crew-grid",children:xe.map(c=>e.jsxs("div",{className:"crew-card",onClick:()=>D("cast",c.name),children:[e.jsx("img",{src:c.profile_url||Z,alt:c.name,className:"crew-image",loading:"lazy",onError:N=>{N.currentTarget.src!==Z&&(N.currentTarget.src=Z)}}),e.jsxs("div",{className:"crew-info",children:[e.jsx("div",{className:"crew-name",title:c.name,onClick:N=>{N.stopPropagation(),D("cast",c.name)},children:c.name}),e.jsx("div",{className:"crew-role",children:c.character||""})]})]},c.id||c.name))})]}),w&&e.jsxs(v.section,{className:"panel-section",style:{marginBottom:28},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",style:{marginTop:0},initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:.4,duration:.5,ease:[.34,1.56,.64,1]},children:w.role==="director"?`Directed by ${w.name}`:`Featuring ${w.name}`}),k?e.jsx("div",{className:"loading",children:"Loading..."}):z?e.jsx("div",{className:"error",children:z}):!b||b.length===0?e.jsx("div",{className:"no-results",children:"No movies found."}):e.jsx("div",{className:"movies-grid rec-grid",children:b.map(c=>e.jsx("div",{className:"movie-card-container",onClick:()=>n(`/movie/${c.movie_id}`,{state:{title:c.title}}),children:e.jsxs("div",{className:"movie-card",children:[e.jsx("img",{src:c.poster_url||"https://placehold.co/200x300/333/999?text=No+Poster",alt:`${c.title} poster`,loading:"lazy",onError:N=>{N.currentTarget.src!=="https://placehold.co/200x300/333/999?text=No+Poster"&&(N.currentTarget.src="https://placehold.co/200x300/333/999?text=No+Poster")}}),e.jsxs("div",{className:"movie-card-info",children:[e.jsx("h3",{children:c.title}),e.jsx("p",{className:"movie-year",children:c.year||""})]})]})},c.movie_id))})]}),e.jsxs(v.section,{className:"movie-section",style:{marginBottom:40},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.5,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",style:{marginTop:0},initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:1.3,duration:.5,ease:[.34,1.56,.64,1]},children:"Reviews"}),pe.length===0?e.jsx("div",{className:"no-results",children:"No reviews found."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[pe.slice(0,3).map((c,N)=>e.jsxs("div",{className:"movie-review-card",children:[e.jsxs("div",{className:"review-header",children:[e.jsx("div",{className:"review-author",children:c.author||"Anonymous"}),c.rating!=null&&e.jsxs("div",{className:"rating",children:["â˜… ",c.rating]})]}),e.jsx("div",{className:"review-content",children:c.content.length>300?`${c.content.substring(0,300)}...`:c.content}),c.url&&e.jsx("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"review-link",children:"Read full review â†—"})]},N)),pe.length>3&&e.jsx("button",{className:"mood-input-go",onClick:()=>window.open(p.imdb_url||`https://www.imdb.com/title/${p.imdb_id}`,"_blank"),children:"See all reviews on IMDb â†—"})]})]})]}),e.jsxs("aside",{style:{position:"sticky",top:20,paddingLeft:20,borderLeft:"1px solid var(--muted)"},children:[O&&e.jsxs(v.section,{className:"panel-section",style:{marginBottom:28},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",style:{marginTop:0,textAlign:"left"},initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:.6,duration:.5,ease:[.34,1.56,.64,1]},children:"More in this Franchise"}),d?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:14},children:S.filter(c=>c.title.toLowerCase().includes(O.toLowerCase())||O.toLowerCase().includes(c.title.toLowerCase())||c.title.toLowerCase().match(/part|chapter|episode/i)&&c.genres.some(N=>p.genres.includes(N))).map(c=>e.jsxs("div",{className:"movie-card similar-movie-card franchise-movie",onClick:()=>n(`/movie/${c.movie_id}`,{state:{title:c.title}}),children:[e.jsx("img",{src:c.poster_url||"https://placehold.co/200x300/333/999?text=No+Poster",alt:`${c.title} poster`,loading:"lazy",onError:N=>{N.currentTarget.src!=="https://placehold.co/200x300/333/999?text=No+Poster"&&(N.currentTarget.src="https://placehold.co/200x300/333/999?text=No+Poster")},style:{width:140,height:210,objectFit:"cover",marginBottom:0,borderRadius:4}}),e.jsxs("div",{className:"movie-card-info",style:{alignItems:"flex-start"},children:[e.jsx("h3",{title:c.title,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"180px"},children:c.title}),e.jsx("div",{className:"meta-info",children:c.year||""}),e.jsx("div",{className:"genre-tags",style:{justifyContent:"flex-start",marginTop:6},children:(Array.isArray(c.genres)?c.genres:[]).slice(0,3).map(N=>e.jsx("span",{className:"genre-tag",onClick:_=>{_.stopPropagation(),n("/",{state:{genre:N}})},children:N},`${c.movie_id}-g-${N}`))})]})]},c.movie_id))})]}),e.jsxs(v.section,{className:"panel-section",style:{marginBottom:28},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",style:{marginTop:0,textAlign:"left"},initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:.9,duration:.5,ease:[.34,1.56,.64,1]},children:"You may also like"}),d?e.jsx("div",{className:"loading",children:"Loading..."}):x?e.jsx("div",{className:"error",children:x}):!S||S.length===0?e.jsx("div",{className:"no-results",children:"No similar titles found."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:14},children:S.filter(c=>!c.title.toLowerCase().includes(O.toLowerCase())&&!O.toLowerCase().includes(c.title.toLowerCase())).map(c=>e.jsxs("div",{className:"movie-card similar-movie-card",onClick:()=>n(`/movie/${c.movie_id}`,{state:{title:c.title}}),children:[e.jsx("img",{src:c.poster_url||"https://placehold.co/200x300/333/999?text=No+Poster",alt:`${c.title} poster`,loading:"lazy",onError:N=>{N.currentTarget.src!=="https://placehold.co/200x300/333/999?text=No+Poster"&&(N.currentTarget.src="https://placehold.co/200x300/333/999?text=No+Poster")},style:{width:140,height:210,objectFit:"cover",marginBottom:0,borderRadius:4}}),e.jsxs("div",{className:"movie-card-info",style:{alignItems:"flex-start"},children:[e.jsx("h3",{title:c.title,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"180px"},children:c.title}),e.jsx("div",{className:"meta-info",children:c.year||""}),e.jsx("div",{className:"genre-tags",style:{justifyContent:"flex-start",marginTop:6},children:(Array.isArray(c.genres)?c.genres:[]).slice(0,3).map(N=>e.jsx("span",{className:"genre-tag",onClick:_=>{_.stopPropagation(),n(`/recommendations?genre=${encodeURIComponent(N)}`,{state:{genre:N}})},children:N},`${c.movie_id}-g-${N}`))})]})]},c.movie_id))})]})]})]})})]})}function en(){const t=$e(),n=Fe(),[r,l]=a.useState(!0),[i,u]=a.useState(null),[h,p]=a.useState([]),f=new URLSearchParams(t.search),d=f.get("title"),m=t.state&&t.state.title,x=f.get("genre"),P=t.state&&t.state.genre,S=f.get("role"),R=t.state&&t.state.role,w=f.get("name"),E=t.state&&t.state.name,k=d||m||"",A=x||P||"",z=(S||R||"").toLowerCase(),M=w||E||"";return a.useEffect(()=>{let b=!1;const T=!!A,D=!!k,Z=!!z&&!!M;if(!T&&!D&&!Z){u("No query provided"),l(!1);return}return l(!0),u(null),(T?fetch("/get_movies_by_genre",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({genre:A})}):Z?fetch("/get_movies_by_person",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:z,name:M})}):fetch("/recommend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:k})})).then(F=>F.ok?F.json():F.json().then(ee=>{throw new Error(ee.error||`HTTP ${F.status}`)})).then(F=>{if(!b){const ee=T?Array.isArray(F.movies)?F.movies:[]:Z?Array.isArray(F.movies)?F.movies:[]:Array.isArray(F.recommendations)?F.recommendations:[];p(ee),l(!1)}}).catch(F=>{b||(u(F.message||"Failed to fetch"),l(!1))}),()=>{b=!0}},[k,A,z,M]),r?e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"section-title",children:"Recommended Titles"}),e.jsx("div",{className:"loading",children:"Loading..."})]}):i?e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"section-title",children:"Recommended Titles"}),e.jsx("div",{className:"error",children:i})]}):e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"section-title",style:{marginTop:0},children:A?`Genre: ${A}`:z&&M?`${z==="director"?"Directed by":"Featuring"} ${M}`:`Recommended for "${k}"`}),!h||h.length===0?e.jsx("div",{className:"no-results",children:"No results found."}):e.jsx("div",{className:"movies-grid rec-grid",children:h.map(b=>e.jsx(tn,{movie:b,onClick:()=>n(`/movie/${b.movie_id}`,{state:{title:b.title}})},b.movie_id))})]})}function tn({movie:t,onClick:n}){const[r,l]=a.useState(!1),[i,u]=a.useState(t.overview||""),h=a.useRef(null),p=a.useRef(null),f=()=>{p.current&&(clearTimeout(p.current),p.current=null),h.current=setTimeout(()=>{l(!0),i||fetch("/movie_overview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie_id:t.movie_id,title:t.title})}).then(R=>R.ok?R.json():{overview:""}).then(R=>u(R.overview||"")).catch(()=>{})},300)},d=()=>{h.current&&(clearTimeout(h.current),h.current=null),p.current=setTimeout(()=>{l(!1)},200)},m=Array.isArray(t.genres)?t.genres:[],x=Array.isArray(t.cast)?t.cast:[],P=Array.isArray(t.directors)?t.directors:[],S=t.vote_average!=null?Number(t.vote_average):null;return e.jsx(v.div,{className:"movie-card-container",onMouseEnter:f,onMouseLeave:d,onClick:n,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},style:{position:"relative"},children:e.jsxs(v.div,{className:"movie-card",animate:{scale:r?1.05:1,zIndex:r?100:1},transition:{scale:{duration:.3,ease:[.34,1.56,.64,1]},zIndex:{duration:0}},whileTap:{scale:.98},style:{cursor:"pointer",position:"relative"},children:[e.jsx("img",{src:t.poster_url||"https://placehold.co/200x300/333/999?text=No+Poster",alt:`${t.title} poster`,loading:"lazy",onError:R=>{R.currentTarget.src!=="https://placehold.co/200x300/333/999?text=No+Poster"&&(R.currentTarget.src="https://placehold.co/200x300/333/999?text=No+Poster")}}),S?e.jsxs("div",{className:"rating-overlay",children:[e.jsx("i",{className:"fas fa-star"}),S.toFixed(1)]}):null,e.jsxs("div",{className:"movie-card-info",children:[e.jsx("h3",{children:t.title}),e.jsx("p",{className:"movie-year",children:t.year||""}),e.jsx("div",{className:"genre-tags",style:{marginTop:"12px"},children:m.map(R=>e.jsx("span",{className:"genre-tag",children:R},`rec-g-${R}`))})]}),e.jsx(Me,{children:r&&e.jsxs(v.div,{className:"movie-flyout",initial:{opacity:0,x:10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:10,scale:.95},transition:{duration:.25,ease:[.16,1,.3,1]},style:{position:"absolute",zIndex:200},children:[e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Overview:"})}),e.jsx("div",{style:{fontSize:"0.9em",color:"#cfd3d7"},children:i||"No summary available."})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Genres:"})}),e.jsx("div",{className:"genre-tags",children:m.length>0?m.map(R=>e.jsx("span",{className:"genre-tag",children:R},`rec-g-${R}`)):e.jsx("span",{children:"N/A"})})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Cast:"})}),e.jsx("div",{className:"genre-tags",children:x.length>0?x.map(R=>e.jsx("span",{className:"genre-tag name-tag",children:R},`rec-c-${R}`)):e.jsx("span",{children:"N/A"})})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Director:"})}),e.jsx("div",{className:"genre-tags",children:P.length>0?P.map(R=>e.jsx("span",{className:"genre-tag name-tag",children:R},`rec-d-${R}`)):e.jsx("span",{children:"N/A"})})]})]})})]})})}const De={maxVerticalRotationDeg:5,dragSensitivity:20,enlargeTransitionMs:300,segments:35},Ne=(t,n,r)=>Math.min(Math.max(t,n),r),it=t=>(t%360+360)%360,ot=t=>((t+180)%360+360)%360-180,Be=(t,n,r)=>{const l=t.dataset[n]??t.getAttribute(`data-${n}`),i=l==null?NaN:parseFloat(l);return Number.isFinite(i)?i:r};function nn(t,n){const r=Array.from({length:n},(d,m)=>-37+m*2),l=[-4,-2,0,2,4],i=[-3,-1,1,3,5],u=r.flatMap((d,m)=>(m%2===0?l:i).map(P=>({x:d,y:P,sizeX:2,sizeY:2}))),h=u.length;if(t.length===0)return u.map(d=>({...d,src:"",alt:""}));t.length>h&&console.warn(`[DomeGallery] Provided image count (${t.length}) exceeds available tiles (${h}). Some images will not be shown.`);const p=t.map(d=>typeof d=="string"?{src:d,alt:""}:{src:d.src||"",alt:d.alt||""}),f=Array.from({length:h},(d,m)=>p[m%p.length]);for(let d=1;d<f.length;d++)if(f[d].src===f[d-1].src){for(let m=d+1;m<f.length;m++)if(f[m].src!==f[d].src){const x=f[d];f[d]=f[m],f[m]=x;break}}return u.map((d,m)=>({...d,src:f[m].src,alt:f[m].alt}))}function sn(t,n,r,l,i){const u=360/i/2,h=u*(t+(r-1)/2);return{rotateX:u*(n-(l-1)/2),rotateY:h}}function an({images:t=[],fit:n=.5,fitBasis:r="auto",minRadius:l=600,maxRadius:i=1/0,padFactor:u=.25,overlayBlurColor:h="#060010",maxVerticalRotationDeg:p=De.maxVerticalRotationDeg,dragSensitivity:f=De.dragSensitivity,enlargeTransitionMs:d=De.enlargeTransitionMs,segments:m=De.segments,dragDampening:x=2,openedImageWidth:P="250px",openedImageHeight:S="350px",imageBorderRadius:R="30px",openedImageBorderRadius:w="30px",grayscale:E=!0}){const k=a.useRef(null),A=a.useRef(null),z=a.useRef(null),M=a.useRef(null),b=a.useRef(null),T=a.useRef(null),D=a.useRef(null),Z=a.useRef(null),O=a.useRef({x:0,y:0}),F=a.useRef({x:0,y:0}),ee=a.useRef(null),ce=a.useRef(!1),G=a.useRef(!1),re=a.useRef(null),ae=a.useRef(!1),ne=a.useRef(0),fe=a.useRef(0),me=a.useRef(!1),ye=a.useCallback(()=>{me.current||(me.current=!0,document.body.classList.add("dg-scroll-lock"))},[]),xe=a.useCallback(()=>{var g;me.current&&((g=k.current)==null?void 0:g.getAttribute("data-enlarging"))!=="true"&&(me.current=!1,document.body.classList.remove("dg-scroll-lock"))},[]),we=a.useMemo(()=>nn(t,m),[t,m]),pe=(g,$)=>{const Y=z.current;Y&&(Y.style.transform=`translateZ(calc(var(--radius) * -1)) rotateX(${g}deg) rotateY(${$}deg)`)},ge=a.useRef(null);a.useEffect(()=>{const g=k.current;if(!g)return;const $=new ResizeObserver(Y=>{var I;const B=Y[0].contentRect,U=Math.max(1,B.width),X=Math.max(1,B.height),H=Math.min(U,X),te=Math.max(U,X),Q=U/X;let W;switch(r){case"min":W=H;break;case"max":W=te;break;case"width":W=U;break;case"height":W=X;break;default:W=Q>=1.3?U:H}let K=W*n;const q=X*1.35;K=Math.min(K,q),K=Ne(K,l,i),ge.current=Math.round(K);const L=Math.max(8,Math.round(H*u));g.style.setProperty("--radius",`${ge.current}px`),g.style.setProperty("--viewer-pad",`${L}px`),g.style.setProperty("--overlay-blur-color",h),g.style.setProperty("--tile-radius",R),g.style.setProperty("--enlarge-radius",w),g.style.setProperty("--image-filter",E?"grayscale(1)":"none"),pe(O.current.x,O.current.y);const V=(I=b.current)==null?void 0:I.querySelector(".enlarge");if(V&&M.current&&A.current){const j=M.current.getBoundingClientRect(),ie=A.current.getBoundingClientRect();if(P&&S){const de=document.createElement("div");de.style.cssText=`position: absolute; width: ${P}; height: ${S}; visibility: hidden;`,document.body.appendChild(de);const Te=de.getBoundingClientRect();document.body.removeChild(de);const s=j.left-ie.left+(j.width-Te.width)/2,o=j.top-ie.top+(j.height-Te.height)/2;V.style.left=`${s}px`,V.style.top=`${o}px`}else V.style.left=`${j.left-ie.left}px`,V.style.top=`${j.top-ie.top}px`,V.style.width=`${j.width}px`,V.style.height=`${j.height}px`}});return $.observe(g),()=>$.disconnect()},[n,r,l,i,u,h,E,R,w,P,S]),a.useEffect(()=>{pe(O.current.x,O.current.y)},[]);const c=a.useCallback(()=>{re.current&&(cancelAnimationFrame(re.current),re.current=null)},[]),N=a.useCallback((g,$)=>{let B=Ne(g,-1.4,1.4)*80,U=Ne($,-1.4,1.4)*80,X=0;const H=Ne(x??.6,0,1),te=.94+.055*H,Q=.015-.01*H,W=Math.round(90+270*H),K=()=>{if(B*=te,U*=te,Math.abs(B)<Q&&Math.abs(U)<Q){re.current=null;return}if(++X>W){re.current=null;return}const q=Ne(O.current.x-U/200,-p,p),L=ot(O.current.y+B/200);O.current={x:q,y:L},pe(q,L),re.current=requestAnimationFrame(K)};c(),re.current=requestAnimationFrame(K)},[x,p,c]);jt({onDragStart:({event:g})=>{if(D.current)return;c();const $=g;ce.current=!0,G.current=!1,F.current={...O.current},ee.current={x:$.clientX,y:$.clientY}},onDrag:({event:g,last:$,velocity:Y=[0,0],direction:B=[0,0],movement:U})=>{if(D.current||!ce.current||!ee.current)return;const X=g,H=X.clientX-ee.current.x,te=X.clientY-ee.current.y;G.current||H*H+te*te>16&&(G.current=!0);const Q=Ne(F.current.x-te/f,-p,p),W=ot(F.current.y+H/f);if((O.current.x!==Q||O.current.y!==W)&&(O.current={x:Q,y:W},pe(Q,W)),$){ce.current=!1;let[K,q]=Y;const[L,V]=B;let I=K*L,j=q*V;if(Math.abs(I)<.001&&Math.abs(j)<.001&&Array.isArray(U)){const[ie,oe]=U;I=Ne(ie/f*.02,-1.2,1.2),j=Ne(oe/f*.02,-1.2,1.2)}(Math.abs(I)>.005||Math.abs(j)>.005)&&N(I,j),G.current&&(fe.current=performance.now()),G.current=!1}}},{target:A,eventOptions:{passive:!0}}),a.useEffect(()=>{const g=T.current;if(!g)return;const $=()=>{var j,ie;if(performance.now()-ne.current<250)return;const B=D.current;if(!B)return;const U=B.parentElement,X=(j=b.current)==null?void 0:j.querySelector(".enlarge");if(!X)return;const H=U.querySelector(".item__image--reference"),te=Z.current;if(!te){X.remove(),H&&H.remove(),U.style.setProperty("--rot-y-delta","0deg"),U.style.setProperty("--rot-x-delta","0deg"),B.style.visibility="",B.style.zIndex=0,D.current=null,(ie=k.current)==null||ie.removeAttribute("data-enlarging"),ae.current=!1,xe();return}const Q=X.getBoundingClientRect(),W=k.current.getBoundingClientRect(),K={left:te.left-W.left,top:te.top-W.top,width:te.width,height:te.height},q={left:Q.left-W.left,top:Q.top-W.top,width:Q.width,height:Q.height},L=document.createElement("div");L.className="enlarge-closing",L.style.cssText=`position:absolute;left:${q.left}px;top:${q.top}px;width:${q.width}px;height:${q.height}px;z-index:9999;border-radius: var(--enlarge-radius, 32px);overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35);transition:all ${d}ms ease-out;pointer-events:none;margin:0;transform:none;`;const V=X.querySelector("img");if(V){const oe=V.cloneNode();oe.style.cssText="width:100%;height:100%;object-fit:cover;",L.appendChild(oe)}X.remove(),k.current.appendChild(L),L.getBoundingClientRect(),requestAnimationFrame(()=>{L.style.left=K.left+"px",L.style.top=K.top+"px",L.style.width=K.width+"px",L.style.height=K.height+"px",L.style.opacity="0"});const I=()=>{L.remove(),Z.current=null,H&&H.remove(),U.style.transition="none",B.style.transition="none",U.style.setProperty("--rot-y-delta","0deg"),U.style.setProperty("--rot-x-delta","0deg"),requestAnimationFrame(()=>{var oe;B.style.visibility="",B.style.opacity="0",B.style.zIndex=0,D.current=null,(oe=k.current)==null||oe.removeAttribute("data-enlarging"),requestAnimationFrame(()=>{U.style.transition="",B.style.transition="opacity 300ms ease-out",requestAnimationFrame(()=>{B.style.opacity="1",setTimeout(()=>{var de;B.style.transition="",B.style.opacity="",ae.current=!1,!ce.current&&((de=k.current)==null?void 0:de.getAttribute("data-enlarging"))!=="true"&&document.body.classList.remove("dg-scroll-lock")},300)})})})};L.addEventListener("transitionend",I,{once:!0})};g.addEventListener("click",$);const Y=B=>{B.key==="Escape"&&$()};return window.addEventListener("keydown",Y),()=>{g.removeEventListener("click",$),window.removeEventListener("keydown",Y)}},[d,xe]);const _=a.useCallback(g=>{var Ee,ve,le;if(ae.current)return;ae.current=!0,ne.current=performance.now(),ye();const $=g.parentElement;D.current=g,g.setAttribute("data-focused","true");const Y=Be($,"offsetX",0),B=Be($,"offsetY",0),U=Be($,"sizeX",2),X=Be($,"sizeY",2),H=sn(Y,B,U,X,m),te=it(H.rotateY),Q=it(O.current.y);let W=-(te+Q)%360;W<-180&&(W+=360);const K=-H.rotateX-O.current.x;$.style.setProperty("--rot-y-delta",`${W}deg`),$.style.setProperty("--rot-x-delta",`${K}deg`);const q=document.createElement("div");q.className="item__image item__image--reference",q.style.opacity="0",q.style.transform=`rotateX(${-H.rotateX}deg) rotateY(${-H.rotateY}deg)`,$.appendChild(q),q.offsetHeight;const L=q.getBoundingClientRect(),V=(Ee=A.current)==null?void 0:Ee.getBoundingClientRect(),I=(ve=M.current)==null?void 0:ve.getBoundingClientRect();if(!V||!I||L.width<=0||L.height<=0){ae.current=!1,D.current=null,$.removeChild(q),xe();return}Z.current={left:L.left,top:L.top,width:L.width,height:L.height},g.style.visibility="hidden",g.style.zIndex=0;const j=document.createElement("div");j.className="enlarge",j.style.position="absolute",j.style.left=I.left-V.left+"px",j.style.top=I.top-V.top+"px",j.style.width=I.width+"px",j.style.height=I.height+"px",j.style.opacity="0",j.style.zIndex="30",j.style.willChange="transform, opacity",j.style.transformOrigin="top left",j.style.transition=`transform ${d}ms ease, opacity ${d}ms ease`;const ie=$.dataset.src||((le=g.querySelector("img"))==null?void 0:le.src)||"",oe=document.createElement("img");oe.src=ie,j.appendChild(oe),b.current.appendChild(j);const de=L.left-I.left,Te=L.top-I.top,s=L.width/I.width,o=L.height/I.height,y=isFinite(s)&&s>0?s:1,J=isFinite(o)&&o>0?o:1;if(j.style.transform=`translate(${de}px, ${Te}px) scale(${y}, ${J})`,setTimeout(()=>{var be;j.parentElement&&(j.style.opacity="1",j.style.transform="translate(0px, 0px) scale(1, 1)",(be=k.current)==null||be.setAttribute("data-enlarging","true"))},16),P||S){const be=Xe=>{if(Xe.propertyName!=="transform")return;j.removeEventListener("transitionend",be);const Pe=j.style.transition;j.style.transition="none";const Ce=P||`${I.width}px`,Se=S||`${I.height}px`;j.style.width=Ce,j.style.height=Se;const ke=j.getBoundingClientRect();j.style.width=I.width+"px",j.style.height=I.height+"px",j.offsetWidth,j.style.transition=`left ${d}ms ease, top ${d}ms ease, width ${d}ms ease, height ${d}ms ease`;const Ae=I.left-V.left+(I.width-ke.width)/2,je=I.top-V.top+(I.height-ke.height)/2;requestAnimationFrame(()=>{j.style.left=`${Ae}px`,j.style.top=`${je}px`,j.style.width=Ce,j.style.height=Se});const ze=()=>{j.removeEventListener("transitionend",ze),j.style.transition=Pe};j.addEventListener("transitionend",ze,{once:!0})};j.addEventListener("transitionend",be)}},[d,ye,S,P,m,xe]);return a.useCallback(g=>{ce.current||G.current||performance.now()-fe.current<80||ae.current||_(g.currentTarget)},[_]),a.useCallback(g=>{g.pointerType==="touch"&&(ce.current||G.current||performance.now()-fe.current<80||ae.current||_(g.currentTarget))},[_]),a.useEffect(()=>()=>{document.body.classList.remove("dg-scroll-lock")},[]),e.jsx("div",{ref:k,className:"sphere-root",style:{"--segments-x":m,"--segments-y":m,"--overlay-blur-color":h,"--tile-radius":R,"--enlarge-radius":w,"--image-filter":E?"grayscale(1)":"none"},children:e.jsxs("main",{ref:A,className:"sphere-main",children:[e.jsx("div",{className:"stage",children:e.jsx("div",{ref:z,className:"sphere",children:we.map((g,$)=>e.jsx("div",{className:"item","data-src":g.src,"data-offset-x":g.x,"data-offset-y":g.y,"data-size-x":g.sizeX,"data-size-y":g.sizeY,style:{"--offset-x":g.x,"--offset-y":g.y,"--item-size-x":g.sizeX,"--item-size-y":g.sizeY},children:e.jsx("div",{className:"item__image",children:e.jsx("img",{src:g.src,draggable:!1,alt:g.alt,loading:"lazy",decoding:"async"})})},`${g.x},${g.y},${$}`))})}),e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"overlay overlay--blur"}),e.jsx("div",{className:"edge-fade edge-fade--top"}),e.jsx("div",{className:"edge-fade edge-fade--bottom"}),e.jsxs("div",{className:"viewer",ref:b,children:[e.jsx("div",{ref:T,className:"scrim"}),e.jsx("div",{ref:M,className:"frame"})]})]})})}function rn({moodText:t,setMoodText:n,setShowSplash:r,fetchMoviesFromMoodText:l,splashTopPosters:i}){Fe();const[u,h]=a.useState(0),p=["Feeling happy today? ðŸŽ‰","Want a thrilling adventure? ðŸŽ¬","Need some motivation? ðŸ’ª","Looking for a good laugh? ðŸ˜‚","In the mood for romance? ðŸ’•","Craving an epic story? ðŸŒŸ"],f=[{label:"Happy",emoji:"ðŸ˜Š",color:"#FFA500"},{label:"Romantic",emoji:"ðŸ’•",color:"#E91E63"},{label:"Thrilling",emoji:"ðŸ”¥",color:"#FF5722"},{label:"Mysterious",emoji:"ðŸŽ­",color:"#9C27B0"},{label:"Inspiring",emoji:"âœ¨",color:"#00BCD4"}],d=m=>{n(m),r(!1),l(m)};return a.useEffect(()=>{const m=setInterval(()=>{h(x=>(x+1)%p.length)},3e3);return()=>clearInterval(m)},[]),e.jsxs(v.div,{className:"splash",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsx("div",{className:"dome-gallery-container",children:e.jsx(an,{images:i,fit:.6,minRadius:600,maxRadius:1200,overlayBlurColor:"#0F171E",imageBorderRadius:"12px",openedImageBorderRadius:"24px",grayscale:!1,dragSensitivity:15,dragDampening:2,openedImageWidth:"300px",openedImageHeight:"450px"})}),e.jsx(v.div,{className:"splash-flex-row",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6,ease:"easeOut"},children:e.jsxs("div",{className:"splash-center-prompt",children:[e.jsxs(v.div,{className:"splash-box-logo",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.4,duration:.5,ease:[.34,1.56,.64,1]},children:[e.jsx("span",{className:"logo-cine",children:"Cine"}),e.jsx("span",{className:"logo-match",children:"Match"})]}),e.jsx(v.p,{className:"splash-box-tagline",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.4},children:"Personalized movie recommendations based on your mood"}),e.jsxs(v.h1,{className:"splash-main-title",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.6},children:["What's ",e.jsx("span",{className:"title-highlight",children:"Your Mood?"})]}),e.jsx(v.p,{className:"splash-subtitle",initial:{y:15,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},children:"Tell us how you're feeling and we'll find the perfect movies for you"}),e.jsxs(v.div,{className:"splash-input-container",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7,duration:.5},children:[e.jsx("input",{className:"splash-mood-input",type:"text",placeholder:"Describe your mood or what you want to watch...",value:t,onChange:m=>n(m.target.value),onKeyDown:m=>m.key==="Enter"&&t.trim()&&(r(!1),l(t))}),e.jsxs(v.button,{className:"splash-find-btn",onClick:()=>t.trim()&&(r(!1),l(t)),whileHover:{scale:1.05},whileTap:{scale:.95},disabled:!t.trim(),children:[e.jsx("span",{className:"sparkle-icon",children:"âœ¨"}),"Find"]})]}),e.jsx(v.div,{className:"mood-buttons",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9,duration:.5},children:f.map((m,x)=>e.jsxs(v.button,{className:"mood-btn",style:{backgroundColor:m.color},onClick:()=>d(m.label),initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.9+x*.1,duration:.3},whileHover:{scale:1.08,y:-5},whileTap:{scale:.95},children:[e.jsx("span",{className:"mood-emoji",children:m.emoji}),m.label]},m.label))}),e.jsxs(v.div,{className:"browse-all-section",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.4,duration:.5},children:[e.jsx("p",{className:"or-divider",children:"or"}),e.jsx(v.button,{className:"browse-all-btn",onClick:()=>r(!1),whileHover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.15)"},whileTap:{scale:.95},children:"Browse All Movies"})]})]})})]})}const xt=a.memo(({children:t,delay:n=0,index:r,onMouseEnter:l,onClick:i})=>{const u=a.useRef(null),h=Nt(u,{amount:.1,once:!0}),[p,f]=a.useState(!1);return a.useEffect(()=>{h&&!p&&f(!0)},[h,p]),e.jsx(v.div,{ref:u,"data-index":r,onMouseEnter:l,onClick:i,initial:p?{scale:1,opacity:1,y:0}:{scale:.85,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},transition:p?{duration:0}:{duration:.5,delay:n,ease:[.25,.46,.45,.94]},children:t})}),Ve=a.memo(({items:t=[],renderItem:n,onItemSelect:r,showGradients:l=!1,enableArrowNavigation:i=!1,className:u="",itemClassName:h="",displayScrollbar:p=!0,initialSelectedIndex:f=-1,staggerDelay:d=.05})=>{const m=a.useRef(null),[x,P]=a.useState(f),[S,R]=a.useState(!1),[w,E]=a.useState(0),[k,A]=a.useState(1),z=a.useCallback(b=>{P(b)},[]),M=a.useCallback((b,T)=>{P(T),r&&r(b,T)},[r]);return a.useCallback(b=>{const{scrollTop:T,scrollHeight:D,clientHeight:Z}=b.target;E(Math.min(T/50,1));const O=D-(T+Z);A(D<=Z?0:Math.min(O/50,1))},[]),a.useEffect(()=>{if(!i)return;const b=T=>{T.key==="ArrowDown"||T.key==="Tab"&&!T.shiftKey?(T.preventDefault(),R(!0),P(D=>Math.min(D+1,t.length-1))):T.key==="ArrowUp"||T.key==="Tab"&&T.shiftKey?(T.preventDefault(),R(!0),P(D=>Math.max(D-1,0))):T.key==="Enter"&&x>=0&&x<t.length&&(T.preventDefault(),r&&r(t[x],x))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,x,r,i]),a.useEffect(()=>{if(!S||x<0||!m.current)return;const b=m.current,T=b.querySelector(`[data-index="${x}"]`);if(T){const Z=b.scrollTop,O=b.clientHeight,F=T.offsetTop,ee=F+T.offsetHeight;F<Z+50?b.scrollTo({top:F-50,behavior:"smooth"}):ee>Z+O-50&&b.scrollTo({top:ee-O+50,behavior:"smooth"})}R(!1)},[x,S]),!t||t.length===0?null:e.jsx(e.Fragment,{children:t.map((b,T)=>e.jsx(xt,{delay:T*d,index:T,onMouseEnter:()=>z(T),onClick:()=>M(b,T),children:n?n(b,T):e.jsx("div",{className:"item-text",children:b.title||b})},b.movie_id||T))})});xt.displayName="AnimatedItem";Ve.displayName="AnimatedList";function lt({count:t=6}){return e.jsx("div",{className:"skeleton-container",children:Array.from({length:t}).map((n,r)=>e.jsx("div",{className:"skeleton-card"},r))})}function on(){const t=Fe(),n=$e(),[r,l]=a.useState([]),[i,u]=a.useState([]),[h,p]=a.useState([]),[f,d]=a.useState([]),[m,x]=a.useState("What's Your Mood?"),[P,S]=a.useState({topWatched:!1,collection:!1,recommendations:!1,mood:!1}),[R,w]=a.useState({topWatched:null,collection:null,recommendations:null,mood:null}),[E,k]=a.useState(""),[A,z]=a.useState(""),[M,b]=a.useState(!1),[T,D]=a.useState(!0),[Z,O]=a.useState([]),[F,ee]=a.useState([]),[ce,G]=a.useState(!1),[re,ae]=a.useState(-1);a.useRef(null);const ne=a.useRef(null),fe=a.useRef(null),[me,ye]=a.useState({show:!1,message:""}),[xe,we]=a.useState(null),[pe,ge]=a.useState(null),c=["Happy","Romcom","Horror","Action/Adventure","Intense/Mystery"],N=[/\bsex\b/i,/\bporn\b/i,/\bnude\b/i,/\berotic\b/i,/\bxxx\b/i,/\badult\b/i,/\bnsfw\b/i,/\bfetish\b/i],_=s=>s?N.some(o=>o.test(String(s))):!1,g=()=>b(s=>!s),$=()=>b(!1),Y=s=>{if($(),pe===s){ge(null),d([]),x("What's Your Mood?");return}ge(s),we(null),x(`Movies matching "${s}" mood`),S(o=>({...o,mood:!0})),w(o=>({...o,mood:null})),fetch("/get_movies_by_mood_category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:s})}).then(o=>{if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.json()}).then(o=>{d(o.movies),S(y=>({...y,mood:!1})),ne&&ne.current&&ne.current.scrollIntoView({behavior:"smooth",block:"start"})}).catch(o=>{w(y=>({...y,mood:o.message})),S(y=>({...y,mood:!1})),console.error(`Error fetching movies for category "${s}":`,o)})},B=()=>{S(s=>({...s,topWatched:!0})),w(s=>({...s,topWatched:null})),fetch("/top_watched").then(s=>{if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);return s.json()}).then(s=>{l(s.movies),S(o=>({...o,topWatched:!1}))}).catch(s=>{w(o=>({...o,topWatched:s.message})),S(o=>({...o,topWatched:!1})),console.error("Error fetching top watched movies:",s)})},U=()=>{S(s=>({...s,collection:!0})),w(s=>({...s,collection:null})),fetch("/get_collection").then(s=>{if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);return s.json()}).then(s=>{u(s.collection),S(o=>({...o,collection:!1}))}).catch(s=>{w(o=>({...o,collection:s.message})),S(o=>({...o,collection:!1})),console.error("Error fetching collection:",s)})},X=s=>{const o=s&&s.trim();if(!o){w(y=>({...y,recommendations:"Please enter a movie title"}));return}if(_(o)){w(y=>({...y,recommendations:"Inappropriate search term blocked."}));return}D(!1),t(`/recommendations?title=${encodeURIComponent(o)}`,{state:{title:o}})},H=s=>{if(!s||s.trim()===""){w(o=>({...o,mood:"Please describe your mood"}));return}if(_(s)){w(o=>({...o,mood:"Inappropriate content blocked."}));return}x(`Movies matching your mood: "${s}"`),S(o=>({...o,mood:!0})),w(o=>({...o,mood:null})),fetch("/moodwise_text_input",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s})}).then(o=>{if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.json()}).then(o=>{d(o.movies),S(y=>({...y,mood:!1})),ne&&ne.current&&ne.current.scrollIntoView({behavior:"smooth",block:"start"})}).catch(o=>{w(y=>({...y,mood:o.message})),S(y=>({...y,mood:!1})),console.error("Error fetching mood movies:",o)})},te=s=>{s&&(D(!1),t("/",{state:{genre:s}}),we(s),ge(null),x(`Genre: ${s}`),S(o=>({...o,mood:!0})),w(o=>({...o,mood:null})),fetch("/get_movies_by_genre",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({genre:s})}).then(o=>{if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.json()}).then(o=>{d(o.movies),S(y=>({...y,mood:!1})),ne&&ne.current&&ne.current.scrollIntoView({behavior:"smooth",block:"start"})}).catch(o=>{w(y=>({...y,mood:o.message})),S(y=>({...y,mood:!1})),console.error("Error fetching movies by genre:",o)}))},Q=(s,o)=>{if(!s||!o)return;const y=s==="director"?`Directed by ${o}`:`Featuring ${o}`;x(y),S(J=>({...J,mood:!0})),w(J=>({...J,mood:null})),fetch("/get_movies_by_person",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:s,name:o})}).then(J=>{if(!J.ok)throw new Error(`HTTP error! Status: ${J.status}`);return J.json()}).then(J=>{d(J.movies),S(se=>({...se,mood:!1})),ne&&ne.current&&ne.current.scrollIntoView({behavior:"smooth",block:"start"})}).catch(J=>{w(se=>({...se,mood:J.message})),S(se=>({...se,mood:!1})),console.error("Error fetching movies by person:",J)})},W=s=>(s||"").replace(/\b\w/g,o=>o.toUpperCase()),K=s=>{if(!s)return"";if(String(s).includes(" "))return W(s);const o=String(s).toLowerCase(),y=Math.floor(o.length/2),J="aeiou";let se=-1;for(let le=y;le<o.length-1;le++)if(J.includes(o[le])&&!J.includes(o[le+1])){se=le+1;break}se===-1&&(se=y);const Ee=o.slice(0,se),ve=o.slice(se);return`${W(Ee)} ${W(ve)}`},q=s=>{const o=s.target.value;if(k(o),!o||o.trim()===""){ee([]),G(!1),ae(-1);return}if(_(o)){ee([]),G(!1),ae(-1),w(y=>({...y,recommendations:"Inappropriate search term blocked."}));return}fetch(`/search_suggestions?q=${encodeURIComponent(o)}`).then(y=>y.ok?y.json():[]).then(y=>{ee(Array.isArray(y)?y:[]),G(Array.isArray(y)&&y.length>0),ae(-1)}).catch(()=>{ee([]),G(!1),ae(-1)})},L=s=>{if(!ce&&s.key==="Enter"){s.preventDefault(),X(E);return}if(s.key==="ArrowDown")s.preventDefault(),ae(o=>Math.min(o+1,F.length-1));else if(s.key==="ArrowUp")s.preventDefault(),ae(o=>Math.max(o-1,0));else if(s.key==="Enter"){s.preventDefault();const o=re>=0?F[re]:E;G(!1),X(o)}else s.key==="Escape"&&G(!1)},V=s=>{if(i.some(y=>String(y.movie_id)===String(s.movie_id))){alert("This movie is already in your collection!");return}u(y=>[...y,s]),fetch("/add_to_collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(y=>{if(!y.ok)throw new Error("Failed to add movie to collection");return y.json()}).catch(y=>{u(J=>J.filter(se=>String(se.movie_id)!==String(s.movie_id))),console.error("Error adding to collection:",y),alert("Failed to add movie to collection. Please try again.")})},I=s=>{u(o=>o.filter(y=>String(y.movie_id)!==String(s))),fetch("/remove_from_collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie_id:s})}).then(()=>{ye({show:!0,message:"Removed from collection"}),setTimeout(()=>ye({show:!1,message:""}),2e3)}).catch(o=>{console.error("Error removing from collection:",o),U(),ye({show:!0,message:"Failed to remove. Refreshed collection."}),setTimeout(()=>ye({show:!1,message:""}),2500)})};a.useEffect(()=>{U(),B()},[]),a.useEffect(()=>{T&&fetch("/sample_posters?limit=120").then(s=>s.ok?s.json():{posters:[]}).then(s=>{const o=Array.isArray(s.posters)?s.posters.filter(y=>!!y&&!y.includes("placehold.co")):[];O(o)}).catch(()=>O([]))},[T]);const j=Le.memo(({movie:s,isCollectionCard:o})=>{const[y,J]=a.useState(!1),[se,Ee]=a.useState(s.overview||""),ve=a.useRef(null),le=a.useRef(null),be=()=>{le.current&&(clearTimeout(le.current),le.current=null),ve.current=setTimeout(()=>{J(!0),se||fetch("/movie_overview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie_id:s.movie_id,title:s.title})}).then(C=>C.ok?C.json():{overview:""}).then(C=>Ee(C.overview||"")).catch(()=>{})},300)},Xe=()=>{ve.current&&(clearTimeout(ve.current),ve.current=null),le.current=setTimeout(()=>{J(!1)},200)},Pe=Array.isArray(s.genres)?s.genres:[],Ce=Array.isArray(s.cast)?s.cast:[],Se=Array.isArray(s.directors)?s.directors:[],ke=parseFloat(s.vote_average),Ae=String(s.movie_id),je=i.some(C=>String(C.movie_id)===Ae),ze=C=>({EN:"English",JA:"Japanese",FR:"French",ES:"Spanish",DE:"German",IT:"Italian",KO:"Korean",ZH:"Chinese",RU:"Russian",HI:"Hindi"})[C]||C;return e.jsx(v.div,{className:"movie-card-container",onMouseEnter:be,onMouseLeave:Xe,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.25,.46,.45,.94]},style:{position:"relative"},children:e.jsxs(v.div,{className:"movie-card",onClick:()=>{D(!1),t(`/movie/${s.movie_id}`,{state:{title:s.title}})},animate:{scale:y?1.05:1,zIndex:y?100:1},transition:{scale:{duration:.3,ease:[.34,1.56,.64,1]},zIndex:{duration:0}},whileTap:{scale:.98},style:{cursor:"pointer",position:"relative"},role:"button",tabIndex:0,"aria-label":`View details for ${s.title}`,onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),t(`/movie/${Ae}`))},children:[e.jsx("img",{src:s.poster_url||"https://placehold.co/200x300/333/999?text=No+Poster",alt:`${s.title} poster`,style:{display:"block"},loading:"lazy",onError:C=>{C.target.src!=="https://placehold.co/200x300/333/999?text=No+Poster"&&(C.target.src="https://placehold.co/200x300/333/999?text=No+Poster")}}),ke?e.jsxs(v.div,{className:"rating-overlay",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1,duration:.3,ease:[.34,1.56,.64,1]},"aria-label":`Rating: ${ke.toFixed(1)} out of 10`,children:[e.jsx("i",{className:"fas fa-star"}),ke.toFixed(1)]}):null,e.jsxs(v.div,{className:"movie-card-info",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.4,ease:[.25,.46,.45,.94]},children:[e.jsx("h3",{children:s.title}),e.jsx("p",{className:"movie-year",children:s.year||"Year not available"})]}),e.jsx(Me,{children:y&&e.jsx(v.div,{className:"floating-actions",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},children:o?e.jsx(v.button,{className:"remove-from-collection-btn",onClick:C=>{C.stopPropagation(),I(Ae)},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Remove from Collection"}):e.jsx(v.button,{className:`add-to-collection-btn ${je?"added":""}`,disabled:je,onClick:C=>{C.stopPropagation(),V(s)},whileHover:{scale:1.05},whileTap:{scale:.95},children:je?"âœ“ Added":"+ Add to Collection"})})}),e.jsx(Me,{children:y&&e.jsxs(v.div,{className:"movie-flyout",initial:{opacity:0,x:10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:10,scale:.95},transition:{duration:.25,ease:[.16,1,.3,1]},style:{position:"absolute",zIndex:200},children:[e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Overview:"})}),e.jsx("div",{style:{fontSize:"0.9em",color:"#cfd3d7"},children:se||"No summary available."})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Genres:"})}),e.jsx("div",{className:"genre-tags",children:Pe.length>0?Pe.map(C=>e.jsx("span",{className:"genre-tag",onClick:ue=>{ue.stopPropagation(),te(C)},children:C},`fly-g-${C}`)):e.jsx("span",{children:"N/A"})})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Cast:"})}),e.jsx("div",{className:"genre-tags",children:Ce.length>0?Ce.map(C=>e.jsx("span",{className:"genre-tag name-tag",onClick:ue=>{ue.stopPropagation(),Q("cast",C)},children:K(C)},`fly-c-${C}`)):e.jsx("span",{children:"N/A"})})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"Director:"})}),e.jsx("div",{className:"genre-tags",children:Se.length>0?Se.map(C=>e.jsx("span",{className:"genre-tag name-tag",onClick:ue=>{ue.stopPropagation(),Q("director",C)},children:K(C)},`fly-d-${C}`)):e.jsx("span",{children:"N/A"})})]})]})}),e.jsx("div",{className:"movie-details-box",style:{display:"none"},children:e.jsxs("div",{className:"details-content",children:[e.jsx("h3",{children:s.title}),e.jsxs("p",{children:[e.jsx("strong",{children:"Year:"})," ",s.year||"N/A"]}),e.jsx("div",{className:"genre-tags",children:Pe.length>0?Pe.map(C=>e.jsx("span",{className:"genre-tag",onClick:ue=>{ue.stopPropagation(),te(C)},children:C},C)):e.jsx("span",{children:"N/A"})}),e.jsx("p",{children:e.jsx("strong",{children:"Cast:"})}),e.jsx("div",{className:"genre-tags",children:Ce.length>0?Ce.map(C=>e.jsx("span",{className:"genre-tag name-tag",onClick:ue=>{ue.stopPropagation(),Q("cast",C)},children:C},`cast-${C}`)):e.jsx("span",{children:"N/A"})}),e.jsx("p",{children:e.jsx("strong",{children:"Director:"})}),e.jsx("div",{className:"genre-tags",children:Se.length>0?Se.map(C=>e.jsx("span",{className:"genre-tag name-tag",onClick:ue=>{ue.stopPropagation(),Q("director",C)},children:C},`dir-${C}`)):e.jsx("span",{children:"N/A"})}),e.jsxs("p",{children:[e.jsx("strong",{children:"Language:"})," ",ze(s.language)||"N/A"]}),e.jsx("div",{className:"action-buttons",children:o?e.jsx("button",{className:"remove-from-collection-btn",onClick:C=>{C.stopPropagation(),I(Ae)},children:"Remove from Collection"}):e.jsx("button",{className:`add-to-collection-btn ${je?"added":""}`,disabled:je,onClick:C=>{C.stopPropagation(),V(s)},children:je?"âœ“ Added":"+ Add to Collection"})})]})})]})})},(s,o)=>s.movie.movie_id===o.movie.movie_id&&s.isCollectionCard===o.isCollectionCard),ie=Le.useCallback(s=>e.jsx(j,{movie:s,isCollectionCard:!1}),[]),oe=Le.useCallback(s=>e.jsx(j,{movie:s,isCollectionCard:!0}),[]),de=(s,o,y)=>o?e.jsx(lt,{count:6}):y?e.jsx("div",{className:"error",children:y}):!s||s.length===0?e.jsx("div",{className:"no-results",children:"No movies found"}):e.jsx("div",{className:"movies-grid",children:e.jsx(Ve,{items:s,renderItem:ie,staggerDelay:.03,displayScrollbar:!1})}),Te=(s,o,y)=>o?e.jsx(lt,{count:6}):y?e.jsx("div",{className:"error",children:y}):!s||s.length===0?e.jsx("div",{className:"no-results",children:"Your collection is empty"}):e.jsx("div",{className:"netflix-style-row",children:e.jsx(Ve,{items:s,renderItem:oe,staggerDelay:.04,displayScrollbar:!1})});return T&&n.pathname==="/"?e.jsx(rn,{moodText:A,setMoodText:z,setShowSplash:D,fetchMoviesFromMoodText:H,splashTopPosters:Z}):e.jsxs("div",{className:"App",children:[n.pathname==="/"&&e.jsxs(v.aside,{className:`sidebar ${M?"open":""}`,initial:{x:-280},animate:{x:M?0:-280},transition:{duration:.3,ease:"easeInOut"},children:[e.jsxs("div",{className:"sidebar-header",children:[M&&e.jsx("i",{className:"fas fa-bars menu-icon",onClick:g}),"Moods & Genres"]}),e.jsx(v.div,{className:"moodsListContainer",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.05}}},children:c.map((s,o)=>e.jsx(v.button,{className:"mood-category-btn",onClick:()=>Y(s),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05,duration:.3},whileHover:{scale:1.05,x:10,transition:{duration:.2}},whileTap:{scale:.95},children:s},s))})]}),e.jsxs("main",{className:n.pathname==="/"&&M?"sidebar-open":"",children:[e.jsxs("header",{children:[e.jsxs("div",{className:"header-left",children:[n.pathname==="/"&&!M&&e.jsx("i",{className:"fas fa-bars menu-icon",onClick:g}),T?e.jsx("i",{className:"fas fa-home home-icon",onClick:()=>D(!1),title:"Browse Movies"}):n.pathname!=="/"&&e.jsx("i",{className:"fas fa-home home-icon",onClick:()=>{t("/")},title:"Home"}),e.jsxs("span",{className:"logo home-btn",onClick:()=>{D(!T),t("/")},style:{cursor:"pointer"},children:[e.jsx("span",{className:"logo-cine",children:"Cine"})," ",e.jsx("span",{className:"logo-match",children:"Match"})]})]}),e.jsxs("div",{className:"search-container",children:[e.jsx("input",{ref:fe,type:"text",placeholder:"Search movies...",value:E,onChange:q,onKeyDown:L,onFocus:()=>G(F.length>0),onBlur:()=>setTimeout(()=>G(!1),150)}),e.jsx("span",{className:"search-icon",onClick:()=>{var s;E.trim()?(G(!1),X(E)):(s=fe.current)==null||s.focus()},children:"ðŸ”"}),e.jsx(Me,{children:ce&&F.length>0&&e.jsx(v.ul,{className:"suggestions-dropdown",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:F.map((s,o)=>e.jsx(v.li,{className:`suggestion-item ${o===re?"highlighted":""}`,onMouseDown:()=>{k(s),G(!1),X(s)},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:o*.03,duration:.2},whileHover:{backgroundColor:"rgba(255,255,255,0.15)",x:5},children:s},s))})})]})]}),!1,n.pathname==="/"&&e.jsxs(e.Fragment,{children:[e.jsxs(v.section,{className:"container",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:.2,duration:.5,ease:[.34,1.56,.64,1]},children:"Top Watched"}),de(r,P.topWatched,R.topWatched)]}),e.jsxs(v.section,{ref:ne,className:"container mood-selector-section",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{id:"moodSectionTitle",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:.5,duration:.5,ease:[.34,1.56,.64,1]},children:m}),e.jsxs(v.div,{className:"mood-input-group",initial:{opacity:0,y:15,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:.7,duration:.5,ease:[.25,.46,.45,.94]},children:[e.jsx("input",{type:"text",id:"moodTextInput",placeholder:"e.g., 'I had a tough day, need a laugh' or 'Something thrilling'",value:A,onChange:s=>z(s.target.value),onKeyDown:s=>s.key==="Enter"&&H(A)}),e.jsx(v.button,{onClick:()=>H(A),whileHover:{scale:1.05},whileTap:{scale:.95},children:"Go"})]}),de(f,P.mood,R.mood)]}),e.jsxs(v.section,{className:"container",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6,ease:[.25,.46,.45,.94]},children:[e.jsx(v.h2,{className:"section-title",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:.8,duration:.5,ease:[.34,1.56,.64,1]},children:"My Collection"}),Te(i,P.collection,R.collection)]})]}),n.pathname.startsWith("/movie/")&&e.jsx("div",{className:"container",style:{paddingTop:20},children:e.jsx(Zt,{})}),n.pathname.startsWith("/recommendations")&&e.jsx("div",{className:"container",style:{paddingTop:20},children:e.jsx(en,{})})]}),e.jsx(Me,{children:me.show&&e.jsx(v.div,{className:"toast",initial:{opacity:0,y:50,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.8},transition:{duration:.3,ease:[.34,1.56,.64,1]},children:me.message})}),e.jsx("footer",{children:e.jsx("div",{className:"container",children:e.jsxs("p",{children:["Â© 2025 CineMatch. All rights reserved. Data provided by ",e.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb"}),"."]})})})]})}class ln extends Le.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error caught by boundary:",n,r)}render(){return this.state.hasError?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0F171E",color:"#E0E0E0",padding:"20px",textAlign:"center"},children:e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2em",marginBottom:"20px",color:"#00A8E1"},children:"Something went wrong"}),e.jsx("p",{style:{marginBottom:"30px"},children:"We're sorry for the inconvenience. Please refresh the page to continue."}),e.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#00A8E1",color:"white",padding:"12px 32px",border:"none",borderRadius:"8px",fontSize:"1em",cursor:"pointer"},children:"Refresh Page"})]})}):this.props.children}}Ge.createRoot(document.getElementById("root")).render(e.jsx(Le.StrictMode,{children:e.jsx(ln,{children:e.jsx(Gt,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(on,{})})})}));
